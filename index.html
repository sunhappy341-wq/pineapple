<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ Pineapple Ecosystem - ç§‘æŠ€å·…å³°</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
    
    <style>
        :root { --accent: #FFD700; --bg: #000; --text: #eee; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: var(--text); font-family: -apple-system, "PingFang SC", sans-serif; overflow-x: hidden; }
        
        /* 1. ä¿®å¤èƒŒæ™¯å±‚çº§ï¼šç¡®ä¿åœ¨æœ€åº•å±‚ä¸”ä¸é®æŒ¡ç‚¹å‡» */
        #particle-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }

        /* 2. å¯¼èˆªæ åŠ å›º */
        nav { position: fixed; top: 0; width: 100%; height: 50px; background: rgba(0,0,0,0.8); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); z-index: 1000; display: flex; justify-content: center; align-items: center; border-bottom: 0.5px solid rgba(255,255,255,0.1); }
        nav ul { display: flex; list-style: none; gap: 20px; }
        nav ul li { font-size: 13px; cursor: pointer; transition: 0.3s; color: #888; }
        nav ul li.active { color: var(--accent); font-weight: bold; }

        /* 3. é¡µé¢æ¿å— */
        .section { height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 20px; position: relative; }
        .title { font-size: clamp(32px, 8vw, 80px); font-weight: 700; background: linear-gradient(180deg, #fff, #444); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        .product-3d { width: 240px; height: 420px; background: linear-gradient(145deg, #111, #000); border: 2px solid #333; border-radius: 40px; margin: 30px 0; display: flex; justify-content: center; align-items: center; font-size: 80px; box-shadow: 0 0 50px rgba(255,215,0,0.1); }

        /* 4. ä¿®å¤å¼¹çª—æ˜¾ç¤ºé€»è¾‘ */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); display: none; justify-content: center; align-items: center; z-index: 2000; opacity: 0; }
        .modal.active { display: flex; opacity: 1; transition: opacity 0.4s; }
        .modal-content { background: #111; width: 90%; max-width: 500px; border-radius: 20px; padding: 25px; border: 1px solid #333; position: relative; transform: translateY(30px); transition: 0.4s; }
        .modal.active .modal-content { transform: translateY(0); }
        .close-btn { position: absolute; top: 15px; right: 20px; font-size: 30px; cursor: pointer; color: #888; z-index: 10; }

        /* 5. Bç«™è§†é¢‘å®¹å™¨å¼ºåˆ¶æ¯”ä¾‹ */
        .video-wrapper { position: relative; width: 100%; height: 0; padding-bottom: 56.25%; margin: 20px 0; border-radius: 12px; overflow: hidden; background: #000; }
        .video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:none; }

        .buy-btn { display: inline-block; padding: 12px 35px; background: #0071e3; color: #fff; border-radius: 25px; text-decoration: none; font-weight: 600; margin-top: 20px; border: none; cursor: pointer; }
    </style>
</head>
<body>

<canvas id="particle-canvas"></canvas>

<nav>
    <ul>
        <li id="nav-phone" class="active" onclick="go('phone')">æ‰‹æœº</li>
        <li id="nav-pad" onclick="go('pad')">å¹³æ¿</li>
        <li id="nav-watch" onclick="go('watch')">æ‰‹è¡¨</li>
    </ul>
</nav>

<section class="section" id="phone">
    <h1 class="title">Pineapple 16 Pro</h1>
    <div class="product-3d" id="p1">ğŸ“±</div>
    <button class="buy-btn" onclick="openModal('phone-vid')">è§‚çœ‹é¢„å‘Šç‰‡</button>
</section>

<section class="section" id="pad">
    <h1 class="title">Pineapple Pad</h1>
    <div class="product-3d" id="p2">ğŸ’»</div>
    <button class="buy-btn" onclick="openModal('pad-vid')">æ€§èƒ½å±•ç¤º</button>
</section>

<section class="section" id="watch">
    <h1 class="title">Pineapple Watch</h1>
    <div class="product-3d" id="p3">âŒš</div>
    <button class="buy-btn" onclick="alert('å³å°†ä¸Šå¸‚ï¼')">äº†è§£æ›´å¤š</button>
</section>

<div id="phone-vid" class="modal" onclick="if(event.target==this) closeModal('phone-vid')">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModal('phone-vid')">&times;</span>
        <h2 style="color:var(--accent)">16 Pro å®˜æ–¹é¢„å‘Š</h2>
        <div class="video-wrapper">
            <iframe src="//player.bilibili.com/player.html?bvid=BV1GJ411x7h7&page=1&high_quality=1" scrolling="no" frameborder="no" allowfullscreen="true"></iframe>
        </div>
        <button class="buy-btn" style="width:100%" onclick="alert('é¢„è®¢æˆåŠŸï¼')">ç«‹å³é¢„è®¢</button>
    </div>
</div>

<div id="pad-vid" class="modal" onclick="if(event.target==this) closeModal('pad-vid')">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModal('pad-vid')">&times;</span>
        <h2 style="color:var(--accent)">Pad Pro ç”Ÿäº§åŠ›</h2>
        <div class="video-wrapper">
            <iframe src="//player.bilibili.com/player.html?bvid=BV1v4411Z7of&page=1&high_quality=1" scrolling="no" frameborder="no" allowfullscreen="true"></iframe>
        </div>
        <button class="buy-btn" style="width:100%" onclick="alert('å·²åŠ å…¥è´­ç‰©è½¦')">ç«‹å³é¢„è®¢</button>
    </div>
</div>

<script>
    // 1. ä¿®å¤æ»šåŠ¨è·³è½¬é€»è¾‘
    function go(id) {
        gsap.to(window, { duration: 1, scrollTo: { y: "#" + id, offsetY: 0 }, ease: "power3.inOut" });
    }

    // 2. å¼¹çª—å¼€å…³é€»è¾‘ä¿®å¤
    function openModal(id) {
        const m = document.getElementById(id);
        m.style.display = 'flex';
        setTimeout(() => m.classList.add('active'), 50);
        document.body.style.overflow = 'hidden';
    }

    function closeModal(id) {
        const m = document.getElementById(id);
        m.classList.remove('active');
        // å…³é”®ï¼šåœæ­¢è§†é¢‘
        const frame = m.querySelector('iframe');
        const s = frame.src; frame.src = ''; frame.src = s;
        setTimeout(() => m.style.display = 'none', 400);
        document.body.style.overflow = '';
    }

    // 3. Three.js èƒŒæ™¯æ¸²æŸ“ä¿®å¤
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('particle-canvas'), alpha: true, antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);

    const geo = new THREE.BufferGeometry();
    const pos = new Float32Array(1500 * 3);
    for(let i=0; i<4500; i++) pos[i] = (Math.random()-0.5) * 15;
    geo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
    const mat = new THREE.PointsMaterial({ color: 0xFFD700, size: 0.03, transparent: true, opacity: 0.6 });
    const points = new THREE.Points(geo, mat);
    scene.add(points);
    camera.position.z = 5;

    function animate() {
        requestAnimationFrame(animate);
        points.rotation.y += 0.001;
        points.rotation.x += 0.0005;
        renderer.render(scene, camera);
    }
    animate();

    // 4. GSAP æ»šåŠ¨äº¤äº’ä¿®å¤
    gsap.registerPlugin(ScrollTrigger);
    
    // ä¸ºæ¯ä¸ªæ‰‹æœºæ¨¡å‹æ·»åŠ æ—‹è½¬
    [1,2,3].forEach(num => {
        gsap.to(`#p${num}`, {
            scrollTrigger: {
                trigger: `#p${num}`,
                start: "top bottom",
                end: "bottom top",
                scrub: 1
            },
            rotateY: 360,
            ease: "none"
        });
    });

    // å¯¼èˆªæ è‡ªåŠ¨äº®èµ·é€»è¾‘
    const sections = ['phone', 'pad', 'watch'];
    sections.forEach(id => {
        ScrollTrigger.create({
            trigger: "#" + id,
            start: "top center",
            end: "bottom center",
            onEnter: () => setActive(id),
            onEnterBack: () => setActive(id)
        });
    });

    function setActive(id) {
        document.querySelectorAll('nav li').forEach(li => li.classList.remove('active'));
        document.getElementById('nav-' + id).classList.add('active');
    }

    // çª—å£å¤§å°é€‚é…
    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });
</script>
</body>
</html>
